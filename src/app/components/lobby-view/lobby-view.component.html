<div class="matchHeader">
    <h2>{{ selectedLobby.description }}</h2>
    Multiplayer link: <a [routerLink]="" (click)="elctronService.openLink(selectedLobby.multiplayerLink)">{{ selectedLobby.multiplayerLink }}</a><br />

    <span id="scoreString"><span class="red-text">Team {{ selectedLobby.teamOneName }}</span> score : <span [ngClass]="{'teamWin': teamOneScore > teamTwoScore, 'teamLoss': teamTwoScore > teamOneScore}">{{ selectedLobby.teamOneScore }}</span> | <span [ngClass]="{'teamWin': teamTwoScore > teamOneScore, 'teamLoss': teamOneScore > teamTwoScore}">{{ selectedLobby.teamTwoScore }}</span> : score <span class="blue-text">Team {{ selectedLobby.teamTwoName }}</span></span>

    <div class="btn-group float-right">
        <button type="button" class="btn btn-info" title="Copy match score"><fa-icon icon="copy"></fa-icon></button>
        <button type="button" class="btn btn-info" title="Score count settings"><fa-icon [icon]="['fas', 'cogs']"></fa-icon></button>
        <button type="button" (click)="synchronizeMp()" class="btn btn-success" title="Synchronize multiplayer data"><fa-icon [icon]="['fas', 'sync']"></fa-icon></button>
    </div>

    <hr />
</div>

<div class="allMaps">
    <div *ngFor="let match of selectedLobby.multiplayerData" class="multiMatch">
        <div class="mapPicture" [ngStyle]="{ 'background-image': getThumbUrl(match.beatmap_id) }"></div>

        <div class="mapContent">
            <div class="mapTitle">
                <h4>Mapname{{ MAPNAME }}</h4>
            </div>

            <div class="mapModifier">
                <div class="alert alert-danger"><fa-icon [icon]="['fas', 'exclamation-triangle']"></fa-icon> There was no modifier set for this map. <a [routerLink]="['/modifiers']">Make sure to set a modifier so you get the accurate score.</a></div>
                <h6>Beatmap modifier: modifier{{ MODIFIER }}</h6>
            </div>

            <hr />

            <div class="mapScore">
                <h5>Team {{ selectedLobby.teamOneName }}</h5>
                <table>
                    <tr>
                        <td><b>{{ getUsernameFromUserId(match.getPlayer(0).user) }}</b></td>
                        <td>&emsp;</td>
                        <td>{{ match.getPlayer(0).score != 0 ? addDot(match.getPlayer(0).score.toFixed(), " ") : 0 }}</td>
                        <td>&emsp;</td>
                        <td>({{ match.getPlayer(0).accuracy }}%)</td>
                        <td>&emsp;</td>
                        <td>(Accuracy player)</td>
                    </tr>

                    <tr>
                        <td><b>{{ getUsernameFromUserId(match.getPlayer(1).user) }}</b></td>
                        <td>&emsp;</td>
                        <td>{{ match.getPlayer(1).score != 0 ? addDot(match.getPlayer(1).score.toFixed(), " ") : 0 }}</td>
                        <td>&emsp;</td>
                        <td>({{ match.getPlayer(1).accuracy }}%)</td>
                        <td>&emsp;</td>
                        <td>(Score player)</td>
                    </tr>

                    <tr>
                        <td><b>{{ getUsernameFromUserId(match.getPlayer(2).user) }}</b></td>
                        <td>&emsp;</td>
                        <td>{{ match.getPlayer(2).score != 0 ? addDot(match.getPlayer(2).score.toFixed(), " ") : 0 }}</td>
                        <td>&emsp;</td>
                        <td>({{ match.getPlayer(2).accuracy }}%)</td>
                        <td>&emsp;</td>
                        <td>(Score player)</td>
                    </tr>
                </table>
                
                <hr />

                <h5>Team {{ selectedLobby.teamTwoName }}</h5>
                <table>
                    <tr>
                        <td><b>{{ getUsernameFromUserId(match.getPlayer(3).user) }}</b></td>
                        <td>&emsp;</td>
                        <td>{{ match.getPlayer(3).score != 0 ? addDot(match.getPlayer(3).score.toFixed(), " ") : 0 }}</td>
                        <td>&emsp;</td>
                        <td>({{ match.getPlayer(3).accuracy }}%)</td>
                        <td>&emsp;</td>
                        <td>(Accuracy player)</td>
                    </tr>

                    <tr>
                        <td><b>{{ getUsernameFromUserId(match.getPlayer(4).user) }}</b></td>
                        <td>&emsp;</td>
                        <td>{{ match.getPlayer(4).score != 0 ? addDot(match.getPlayer(4).score.toFixed(), " ") : 0 }}</td>
                        <td>&emsp;</td>
                        <td>({{ match.getPlayer(4).accuracy }}%)</td>
                        <td>&emsp;</td>
                        <td>(Score player)</td>
                    </tr>

                    <tr>
                        <td><b>{{ getUsernameFromUserId(match.getPlayer(5).user) }}</b></td>
                        <td>&emsp;</td>
                        <td>{{ match.getPlayer(5).score != 0 ? addDot(match.getPlayer(5).score.toFixed(), " ") : 0 }}</td>
                        <td>&emsp;</td>
                        <td>({{ match.getPlayer(5).accuracy }}%)</td>
                        <td>&emsp;</td>
                        <td>(Score player)</td>
                    </tr>
                </table>

                <hr />

                <div class=red-text>Team {{ selectedLobby.teamOneName }} score: {{ addDot(match.team_one_score, " ") }}</div>
                <div class=blue-text>Team {{ selectedLobby.teamTwoName }} score: {{ addDot(match.team_two_score, " ") }}</div>

                <br />

                <h3><span class=red-text>Team {{ selectedLobby.teamOneName }}</span> has won.</h3><span class=red-text>Team {{ selectedLobby.teamOneName }}</span> score: {{ addDot(match.team_one_score, " ")}} | <span class=blue-text>Team {{ selectedLobby.teamTwoName }}</span> score: {{ addDot(match.team_two_score, " ") }} | Score difference: {{ addDot(match.team_one_score - match.team_two_score, " ") }}
            </div>
        </div>

        <div class=mapButtons>
            <button type=button class="btn btn-primary">Copy result</button>
        </div>
    </div>
    
</div>